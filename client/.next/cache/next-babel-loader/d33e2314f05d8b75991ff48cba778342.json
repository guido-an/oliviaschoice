{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nvar service = axios.create({\n  baseURL: process.env.APP_API,\n  withCredentials: true\n});\n\nvar UsersList = function UsersList() {\n  var _useState = useState([]),\n      users = _useState[0],\n      setUsers = _useState[1];\n\n  var _useState2 = useState(false),\n      proceed = _useState2[0],\n      setProceed = _useState2[1];\n\n  var router = useRouter();\n  /*   useEffect(() => {\n      // Create an scoped async function in the hook\n      async function checkIfAdmin () {\n        try {\n          const res = await service.get('/admin/get-admin')\n          if (res.data.admin) {\n            const response = await service.get('/admin/list-of-users')\n            setUsers(response.data.users)\n            setProceed(true)\n          } else {\n            const response = await service.get('/admin/list-of-users')\n            setUsers(response.data.users)\n            console.log('res', response)\n            setProceed(true)\n            // router.push('/')\n          }\n        } catch (e) {\n          console.log(e)\n        }\n      }\n      // Execute the created function directly\n      checkIfAdmin()\n    }, []) */\n\n  if (!proceed) {\n    return __jsx(\"p\", null);\n  }\n\n  var displayUsers = function displayUsers() {\n    return users.map(function (user) {\n      if (user.admin) {\n        return;\n      }\n\n      return __jsx(\"div\", {\n        key: user._id\n      }, __jsx(\"p\", null, user.firstName, \" \", user.lastName), __jsx(\"p\", null, \"Ordini totali: \", user.orders.length), __jsx(Link, {\n        href: \"/admin/utenti/[id]\",\n        as: \"/admin/utenti/\".concat(encodeURIComponent(user._id))\n      }, \"Dettagli\"));\n    });\n  };\n\n  return __jsx(\"div\", null, __jsx(\"h1\", null, \"Utenti\"), displayUsers());\n};\n\nexport default UsersList;","map":null,"metadata":{},"sourceType":"module"}