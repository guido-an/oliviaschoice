{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/Guido/Desktop/pharmashop/client/pages/pagamento.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements } from '@stripe/react-stripe-js';\nimport CheckoutForm from '../components/CheckoutForm';\nimport { useContext, useEffect, useState } from 'react';\nimport { CartContext } from '../contexts/CartContext';\nimport axios from 'axios';\nimport Link from 'next/link'; // Make sure to call loadStripe outside of a component’s render to avoid\n// recreating the Stripe object on every render.\n// loadStripe is initialized with a fake API key.\n// Sign in to see examples pre-filled with your key.\n\nvar promise = loadStripe(process.env.STRIPE_PK);\nvar service = axios.create({\n  baseURL: process.env.APP_API,\n  withCredentials: true\n});\n\nvar Pagamento = function Pagamento() {\n  _s();\n\n  var _useContext = useContext(CartContext),\n      productsInCart = _useContext.productsInCart,\n      shippingInfo = _useContext.shippingInfo,\n      totalPrice = _useContext.totalPrice,\n      calculateTotalPrice = _useContext.calculateTotalPrice; // useEffect(async () => {\n  //   await service.post('/create-order', {\n  //     name: 'test'\n  //   })\n  //   calculateTotalPrice()\n  // })\n\n\n  useEffect(function () {\n    // async function createOrder () {\n    //   await service.post('/create-order', {\n    //     name: 'test'\n    //   })\n    // }\n    // createOrder()\n    calculateTotalPrice();\n  }, []);\n\n  var createOrder = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(product) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return service.post('/create-order', {\n                name: 'test'\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function createOrder(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, \"Pagamento: \", totalPrice), __jsx(Elements, {\n    stripe: promise,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, __jsx(CheckoutForm, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  })));\n};\n\n_s(Pagamento, \"5A+9pqnt6QT+UU8cXELBRqpRAhc=\");\n\n_c = Pagamento;\nexport default Pagamento;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pagamento\");","map":{"version":3,"sources":["/Users/Guido/Desktop/pharmashop/client/pages/pagamento.js"],"names":["loadStripe","Elements","CheckoutForm","useContext","useEffect","useState","CartContext","axios","Link","promise","process","env","STRIPE_PK","service","create","baseURL","APP_API","withCredentials","Pagamento","productsInCart","shippingInfo","totalPrice","calculateTotalPrice","createOrder","product","post","name"],"mappings":";;;;;;;;;AAAA,SAASA,UAAT,QAA2B,mBAA3B;AACA,SAASC,QAAT,QAAyB,yBAAzB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,SAASC,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB,C,CAEA;AACA;AACA;AACA;;AACA,IAAMC,OAAO,GAAGT,UAAU,CAACU,OAAO,CAACC,GAAR,CAAYC,SAAb,CAA1B;AAEA,IAAMC,OAAO,GAAGN,KAAK,CAACO,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEL,OAAO,CAACC,GAAR,CAAYK,OADM;AAE3BC,EAAAA,eAAe,EAAE;AAFU,CAAb,CAAhB;;AAKA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AAAA;;AAAA,oBACoDf,UAAU,CAACG,WAAD,CAD9D;AAAA,MACda,cADc,eACdA,cADc;AAAA,MACEC,YADF,eACEA,YADF;AAAA,MACgBC,UADhB,eACgBA,UADhB;AAAA,MAC4BC,mBAD5B,eAC4BA,mBAD5B,EAGtB;AACA;AACA;AACA;AACA;AAEA;;;AAEAlB,EAAAA,SAAS,CAAC,YAAM;AACd;AACA;AACA;AACA;AACA;AACA;AACAkB,IAAAA,mBAAmB;AACpB,GARQ,EAQN,EARM,CAAT;;AAUA,MAAMC,WAAW;AAAA,wEAAG,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACZX,OAAO,CAACY,IAAR,CAAa,eAAb,EAA8B;AAClCC,gBAAAA,IAAI,EAAE;AAD4B,eAA9B,CADY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXH,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAKA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAgBF,UAAhB,CADF,EAEE,MAAC,QAAD;AAAU,IAAA,MAAM,EAAEZ,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CADF;AAQD,CAlCD;;GAAMS,S;;KAAAA,S;AAmCN,eAAeA,SAAf","sourcesContent":["import { loadStripe } from '@stripe/stripe-js'\nimport { Elements } from '@stripe/react-stripe-js'\nimport CheckoutForm from '../components/CheckoutForm'\nimport { useContext, useEffect, useState } from 'react'\nimport { CartContext } from '../contexts/CartContext'\nimport axios from 'axios'\nimport Link from 'next/link'\n\n// Make sure to call loadStripe outside of a component’s render to avoid\n// recreating the Stripe object on every render.\n// loadStripe is initialized with a fake API key.\n// Sign in to see examples pre-filled with your key.\nconst promise = loadStripe(process.env.STRIPE_PK)\n\nconst service = axios.create({\n  baseURL: process.env.APP_API,\n  withCredentials: true\n})\n\nconst Pagamento = () => {\n  const { productsInCart, shippingInfo, totalPrice, calculateTotalPrice } = useContext(CartContext)\n\n  // useEffect(async () => {\n  //   await service.post('/create-order', {\n  //     name: 'test'\n  //   })\n  //   calculateTotalPrice()\n\n  // })\n\n  useEffect(() => {\n    // async function createOrder () {\n    //   await service.post('/create-order', {\n    //     name: 'test'\n    //   })\n    // }\n    // createOrder()\n    calculateTotalPrice()\n  }, [])\n\n  const createOrder = async (product) => {\n    await service.post('/create-order', {\n      name: 'test'\n    })\n  }\n  return (\n    <div>\n      <h1>Pagamento: {totalPrice}</h1>\n      <Elements stripe={promise}>\n        <CheckoutForm />\n      </Elements>\n    </div>\n  )\n}\nexport default Pagamento\n"]},"metadata":{},"sourceType":"module"}