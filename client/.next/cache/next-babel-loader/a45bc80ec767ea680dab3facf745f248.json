{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport { useContext, useEffect, useState } from 'react';\nimport { CartContext } from '../../contexts/CartContext';\nimport { ProductContext } from '../../contexts/ProductContext';\n\nconst Product = () => {\n  const router = useRouter();\n  const {\n    id\n  } = router.query; // Destructuring our router object\n\n  const {\n    addToCart,\n    productsInCart\n  } = useContext(CartContext);\n  const {\n    getSingleProduct,\n    singleProduct\n  } = useContext(ProductContext);\n  const {\n    0: displayExceedMsg,\n    1: setDisplayExceedMsg\n  } = useState(false);\n  useEffect(() => {\n    document.getElementById('quantity').value = 1;\n\n    async function fetchProduct() {\n      await getSingleProduct(id);\n    }\n\n    fetchProduct();\n  }, [id]);\n\n  const exceedQuantity = singleProduct => {\n    console.log('exced', document.getElementById('quantity').value, singleProduct);\n\n    if (document.getElementById('quantity').value > singleProduct.effectiveStock) {\n      document.getElementById('add-to-cart-btn').disabled = true;\n      setDisplayExceedMsg(true);\n    } else {\n      document.getElementById('add-to-cart-btn').disabled = false;\n      setDisplayExceedMsg(false);\n    }\n  };\n\n  return __jsx(\"div\", null, __jsx(\"h1\", null, \"Product page\"), __jsx(\"p\", null, singleProduct && singleProduct.name), __jsx(\"input\", {\n    onChange: () => exceedQuantity(singleProduct),\n    id: \"quantity\",\n    type: \"number\",\n    min: \"1\"\n  }), __jsx(\"button\", {\n    id: \"add-to-cart-btn\",\n    onClick: () => addToCart(singleProduct, document.getElementById('quantity').value)\n  }, \"Add to cart\"), displayExceedMsg && __jsx(\"p\", null, \"Sono rimaste \", singleProduct.effectiveStock, \" unit\\xE0 di questo prodotto\"));\n};\n\nexport default Product;","map":null,"metadata":{},"sourceType":"module"}