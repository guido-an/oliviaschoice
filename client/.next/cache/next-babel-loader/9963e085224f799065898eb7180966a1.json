{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\nimport ImageUploading from \"react-images-uploading\";\nimport storage from \"../../firebase/index\";\nimport axios from 'axios';\nconst service = axios.create({\n  baseURL: process.env.APP_API,\n  withCredentials: true\n});\n\nconst imageUpload = () => {\n  const [images, setImages] = React.useState([]);\n  const maxNumber = 69;\n\n  const onChange = imageList => {\n    setImages(imageList);\n  };\n\n  const onImageSave = e => {\n    // data for submit\n    const saveImages = images;\n    saveImages.forEach(image => {\n      handleUpload(image);\n    });\n  };\n\n  const putImageOnProduct = async (url, name) => {\n    const response = await service.post('/api/product/update', {\n      url: url,\n      name: name\n    });\n  };\n\n  const handleUpload = imageToUpload => {\n    if (imageToUpload) {\n      const image = imageToUpload.file;\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on(\"state_changed\",\n      /*  snapshot => {\n         // progress function ...\n         const progress = Math.round(\n           (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n         );\n         //this.setState({ progress });\n       },\n       error => {\n         // Error function ...\n         console.log(error);\n       }, */\n      () => {\n        // complete function ...\n        storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n          putImageOnProduct(url, image.name);\n        });\n      });\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-2214434314\" + \" \" + \"App\"\n  }, __jsx(_JSXStyle, {\n    id: \"2214434314\"\n  }, [\".upload-btn.jsx-2214434314{background:#fff;border-radius:10px;width:79%;padding:3%;font-size:20px;margin-bottom:25px;}\", \".remove-btn.jsx-2214434314{background:#f44336;border-radius:10px;width:20%;padding:3% 0;font-size:20px;border-color:red;color:#fff;}\", \".image-item.jsx-2214434314{text-align:center;}\", \"img.jsx-2214434314{width:400px;}\", \".image-item__btn-wrapper.jsx-2214434314{position:relative;top:20px;margin-right:auto;text-align:right;margin-left:auto;width:400px;}\", \".remove-image.jsx-2214434314{position:absolute;top:-30px;right:-10px;border-radius:10em;padding:2px 6px 3px;-webkit-text-decoration:none;text-decoration:none;font:700 21px/20px sans-serif;background:#555;border:3px solid #fff;color:#FFF;box-shadow:0 2px 6px rgba(0,0,0,0.5),inset 0 2px 4px rgba(0,0,0,0.3);text-shadow:0 1px 2px rgba(0,0,0,0.5);-webkit-transition:background 0.5s;-webkit-transition:background 0.5s;transition:background 0.5s;}\", \".remove-image.jsx-2214434314:hover{background:#E54E4E;padding:3px 7px 5px;top:-31px;right:-11px;}\", \".remove-image.jsx-2214434314:active{background:#E54E4E;top:-30px;right:-11px;}\", \".save-btn.jsx-2214434314{position:-webkit-sticky;position:-webkit-sticky;position:sticky;bottom:10px;background:#008CBA;color:#fff;padding:10px 50px;border-color:#008CBA;border-radius:10px;font-size:20px;}\"]), __jsx(ImageUploading, {\n    multiple: true,\n    value: images,\n    onChange: onChange,\n    maxNumber: maxNumber,\n    dataURLKey: \"data_url\"\n  }, ({\n    imageList,\n    onImageUpload,\n    onImageRemoveAll,\n    onImageRemove,\n    isDragging,\n    dragProps\n  }) => // write your building UI\n  __jsx(\"div\", {\n    className: \"jsx-2214434314\" + \" \" + \"upload__image-wrapper\"\n  }, __jsx(\"button\", _extends({\n    style: isDragging ? {\n      color: \"red\"\n    } : undefined,\n    onClick: onImageUpload\n  }, dragProps, {\n    className: \"jsx-2214434314\" + \" \" + (dragProps && dragProps.className != null && dragProps.className || \"upload-btn\")\n  }), \"Click or Drop here the images\"), \"\\xA0\", __jsx(\"button\", {\n    onClick: onImageRemoveAll,\n    className: \"jsx-2214434314\" + \" \" + \"remove-btn\"\n  }, \"Remove all images\"), imageList.map((image, index) => __jsx(\"div\", {\n    key: index,\n    className: \"jsx-2214434314\" + \" \" + \"image-item\"\n  }, __jsx(\"p\", {\n    className: \"jsx-2214434314\"\n  }, image.name), __jsx(\"div\", {\n    className: \"jsx-2214434314\" + \" \" + \"image-item__btn-wrapper\"\n  }, __jsx(\"button\", {\n    onClick: () => onImageRemove(index),\n    className: \"jsx-2214434314\" + \" \" + \"remove-image\"\n  }, \"X\")), __jsx(\"img\", {\n    src: image[\"data_url\"],\n    alt: \"\",\n    width: \"100\",\n    className: \"jsx-2214434314\"\n  }))))), __jsx(\"button\", {\n    onClick: () => onImageSave(),\n    className: \"jsx-2214434314\" + \" \" + \"save-btn\"\n  }, \"Save\"));\n};\n\nexport default imageUpload;","map":null,"metadata":{},"sourceType":"module"}