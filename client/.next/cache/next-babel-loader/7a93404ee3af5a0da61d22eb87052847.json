{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { createContext, useState } from 'react';\nimport axios from 'axios';\nexport const UserContext = /*#__PURE__*/createContext();\nconst service = axios.create({\n  baseURL: process.env.APP_API,\n  withCredentials: true\n});\n\nconst UserContextProvider = props => {\n  const {\n    0: user,\n    1: setUser\n  } = useState({});\n\n  const signup = async user => {\n    const data = await service.post('/auth/signup', user);\n    return data;\n  };\n\n  const login = async user => {\n    const data = await service.post('/auth/login', user);\n    return data;\n  };\n\n  const updateUser = async form => {\n    const data = await service.post('/user/update', form);\n    return data;\n  };\n\n  const checkIfLoggedIn = async () => {\n    const {\n      data\n    } = await service.get('/auth/loggedin');\n    return data.user;\n  };\n\n  const fetchUser = async () => {\n    try {\n      const res = await checkIfLoggedIn();\n      console.log(res, 'res');\n      setUser(res);\n    } catch (err) {\n      setUser(null);\n    }\n  };\n\n  const getOrders = async () => {\n    try {\n      const res = await service.get('/user/orders');\n      return res.data.orders;\n    } catch (err) {\n      setUser(null);\n    }\n  };\n\n  const getSingleOrder = async id => {\n    try {\n      const res = await service.get('/user/order/' + id);\n      return res.data.order;\n    } catch (err) {\n      setUser(null);\n    }\n  };\n\n  return __jsx(UserContext.Provider, {\n    value: {\n      user,\n      signup,\n      login,\n      updateUser,\n      setUser,\n      checkIfLoggedIn,\n      fetchUser,\n      getOrders,\n      getSingleOrder\n    }\n  }, props.children);\n};\n\nexport default UserContextProvider;","map":null,"metadata":{},"sourceType":"module"}