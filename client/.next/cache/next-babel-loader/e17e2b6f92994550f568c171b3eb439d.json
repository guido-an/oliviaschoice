{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useRouter } from 'next/router';\nconst service = axios.create({\n  baseURL: process.env.APP_API,\n  withCredentials: true\n});\n\nconst UserDetails = () => {\n  const {\n    0: user,\n    1: setUser\n  } = useState({});\n  const {\n    0: proceed,\n    1: setProceed\n  } = useState(false);\n  const router = useRouter();\n  const {\n    id\n  } = router.query;\n  useEffect(() => {\n    // Create an scoped async function in the hook\n    async function checkIfAdmin() {\n      try {\n        const res = await service.get('/admin/get-admin');\n\n        if (res.data.admin) {\n          const response = await service.get('/user/' + id);\n          setUser(response.data.user);\n          setProceed(true);\n        } else {\n          const response = await service.get('/user/' + id);\n          setUser(response.data.user);\n          setProceed(true); // router.push('/')\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    } // Execute the created function directly\n\n\n    checkIfAdmin();\n  }, [id]);\n\n  if (!proceed) {\n    return __jsx(\"p\", null);\n  }\n\n  const displayUser = () => {\n    return __jsx(\"div\", null, __jsx(\"h1\", null, \"UserDetails\"), __jsx(\"p\", null, user.firstName, \" \", user.lastName), __jsx(\"p\", null, user.email), __jsx(\"p\", null, user.telephone));\n  };\n\n  const displayOders = () => {\n    return __jsx(\"div\", null, __jsx(\"p\", null, \"Orders:\"), user.orders.map(order => {\n      return __jsx(\"div\", {\n        key: order._id\n      }, __jsx(\"p\", null, order.totalPrice), __jsx(\"p\", null, order.paid ? 'completato' : 'in sospeso'));\n    }));\n  };\n\n  return __jsx(\"div\", null, displayUser(), displayOders());\n};\n\nexport default UserDetails;","map":null,"metadata":{},"sourceType":"module"}