{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{\"/Cu9\":function(t,e,n){\"use strict\";n.r(e);var r=n(\"o0o1\"),a=n.n(r),u=n(\"HaE+\"),o=n(\"q1tI\"),c=n.n(o),i=n(\"nOHt\"),s=n(\"TJRf\"),d=n(\"p5uB\"),f=c.a.createElement;e.default=function(){var t=Object(i.useRouter)().query.id,e=Object(o.useContext)(s.a),n=e.addToCart,r=(e.productsInCart,Object(o.useContext)(d.a)),c=r.getSingleProduct,l=r.singleProduct,p=Object(o.useState)(!1),b=p[0],v=p[1];Object(o.useEffect)((function(){function e(){return(e=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}document.getElementById(\"quantity\").value=1,function(){e.apply(this,arguments)}()}),[t]);return f(\"div\",null,f(\"h1\",null,\"Product page\"),f(\"p\",null,l&&l.name),f(\"input\",{onChange:function(){return function(t){console.log(\"exced\",document.getElementById(\"quantity\").value,t),document.getElementById(\"quantity\").value>t.effectiveStock?(document.getElementById(\"add-to-cart-btn\").disabled=!0,v(!0)):(document.getElementById(\"add-to-cart-btn\").disabled=!1,v(!1))}(l)},id:\"quantity\",type:\"number\",min:\"1\"}),f(\"button\",{id:\"add-to-cart-btn\",onClick:function(){return n(l,document.getElementById(\"quantity\").value)}},\"Add to cart\"),b&&f(\"p\",null,\"Sono rimaste \",l.effectiveStock,\" unit\\xe0 di questo prodotto\"))}},BsWD:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return a}));var r=n(\"a3WO\");function a(t,e){if(t){if(\"string\"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},TJRf:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return b}));var r=n(\"o0o1\"),a=n.n(r),u=n(\"a3WO\");var o=n(\"BsWD\");function c(t){return function(t){if(Array.isArray(t))return Object(u.a)(t)}(t)||function(t){if(\"undefined\"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}var i=n(\"HaE+\"),s=n(\"q1tI\"),d=n.n(s),f=n(\"vDqi\"),l=n.n(f),p=d.a.createElement,b=Object(s.createContext)();l.a.create({baseURL:\"http://localhost:5000\",withCredentials:!0}),e.b=function(t){var e=Object(s.useState)([]),n=e[0],r=e[1],u=Object(s.useState)(0),o=u[0],d=u[1],f=Object(s.useState)(!1),l=f[0],v=f[1];Object(s.useEffect)((function(){var t=JSON.parse(localStorage.getItem(\"productsInCart\"));r(t),v(!0)}),[]);var m=function(){var t=Object(i.a)(a.a.mark((function t(e,u){var o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=!1,n&&n.forEach((function(t){t._id===e._id&&(o=!0,e.boughtQuantity=Number(t.boughtQuantity)+Number(u),e.boughtQuantity>e.effectiveStock&&(e.boughtQuantity=e.effectiveStock))})),n?o?r(c(n)):(e.boughtQuantity=Number(u),r([].concat(c(n),[e]))):(e.boughtQuantity=Number(u),r([e]));case 3:case\"end\":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();l&&localStorage.setItem(\"productsInCart\",JSON.stringify(n));return p(b.Provider,{value:{productsInCart:n,totalPrice:o,setProductsInCart:r,addToCart:m,updateCart:function(t,e){var a=n.map((function(n){return n._id===t._id&&(n.boughtQuantity=Number(e)),n}));r(a)},setTotalPrice:d,calculateTotalPrice:function(){if(n){var t=0;n.forEach((function(e){t+=e.boughtQuantity*e.price})),d(t)}}}},t.children)}},UjoK:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/prodotto/[id]\",function(){return n(\"/Cu9\")}])},a3WO:function(t,e,n){\"use strict\";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,\"a\",(function(){return r}))},p5uB:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return f}));var r=n(\"o0o1\"),a=n.n(r),u=n(\"HaE+\"),o=n(\"q1tI\"),c=n.n(o),i=n(\"vDqi\"),s=n.n(i),d=c.a.createElement,f=Object(o.createContext)(),l=s.a.create({baseURL:\"http://localhost:5000\",withCredentials:!0});e.b=function(t){var e=Object(o.useState)([]),n=e[0],r=e[1],c=Object(o.useState)(null),i=c[0],s=c[1],p=function(){var t=Object(u.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.get(\"\".concat(\"http://localhost:5000\",\"/api/products\"));case 2:e=t.sent,r(n=e.data);case 4:case\"end\":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt(\"return\");case 2:return t.next=4,l.get(\"\".concat(\"http://localhost:5000\",\"/api/product/\").concat(e));case 4:n=t.sent,s(n.data);case 6:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return d(f.Provider,{value:{products:n,getProducts:p,getSingleProduct:b,singleProduct:i}},t.children)}}},[[\"UjoK\",0,1,2,3,4]]]);","extractedComments":[]}